---
title: "Big changes to my website, what they are and why I did them."
publishedAt: "2022-08-03"
summary: "I initially thought I didn't need to continue working on my website once I finished it, but it reached the point where I couldn't understand my old codebase properly to add new features, so I decided to rewrite the website to the best of my ability."
tags: ["Next.js", "Personal Website", "T3 Stack"]
image: "https://user-images.githubusercontent.com/47594764/182570851-dcc4c3e9-0e4d-4214-a86a-c4542ae5dfa4.png"
published: true
---

# Intro

Back when I wrote this website throughout the 2021 summer, The principle was more oriented to my previous "microservice" arhitecture instead of a more practical approach like now. I still find the idea interesting, but I personally think for a portfolio website it is not needed, and with `Next.js`'s amazing featureset, I can do everything that I need from the same `Next.js` app!

This part year I've spent a lot of time experimenting with different/new approaches to creating web applications and I've made many projects which you can see on my [GitHub](https://github.com/davidilie).

# The Old Design

The project was structured as a <Definition term="monorepo" definition="A repository which contains more than one project"/> with these packages:

-  `frontend` - `Next.js` frontend
-  `agenda` - Background Cron job for YouTube and GitHub data
-  `identify` - Auth server for `agenda`
-  `spotify` - Spotify statistics

<InfoQuote>
   This was back before I didn't know how to actually create a monorepo, so each
   folder had its own "node_modules", etc...
</InfoQuote>

What's even more funny is that the entire project has been converted to Typescript except for the `agenda` microservice as even while I was coding it I didn't really understand how it worked so therefore i didn't want to touch it :)

By having everything so seperate from each other, it was hard to keep everything synced with each other (Type Definitions, etc.) so I left most types for API responses as `any` which is never good for a _senior professional typescript mastermind_ like how I am now.

My website was also using a MongoDB database connected to each needed package with a basic library to interact with the database, there was no set schema, so no type definitions, etc...

# The New Design

From the months i've experimented and developed a solid understand of `Next.js`'s features, I decided to swap out the monorepo approach and stick with a single application.

I recently discovered [the T3 Stack](create.t3.gg) which creates a `Next.js` application containing:

-  [`Typescript`](https://www.typescriptlang.org/) - Superior programming language

```ts title="Typescript Type for Gear"
export interface DeviceProps {
   icon: IconType;
   name: string;
   description: string;
   specs: { prefix: string; suffix: string }[];
}
```

-  [`tRPC`](https://trpc.io/) - End-to-end typesafe APIs made easy

```tsx title="tRPC router example"
export const appRouter = createRouter()
   .transformer(superjson) // Safely serialize JavaScript expressions
   .merge("blog.", blogRouter) // Add Blog Routes
   .merge("spotify.", spotifyRouter) // Add Spotify Routes
   // Example of queries which were merged above ^^
   .query("getStatistics", {
      async resolve({ ctx }) {
         return ctx.prisma.youTubeStatictic.findFirst();
      },
   })
   .query("getProjects", {
      async resolve({ ctx }) {
         return ctx.prisma.gitHubProject.findMany();
      },
   });
```

-  [`Prisma`](https://prisma.io) - Great easy-to-use ORM

```tsx title="Prisma Schema"
model Comment {
  id        String   @id @default(uuid())
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  postSlug  String
  post      Post     @relation(fields: [postSlug], references: [slug], onDelete: Cascade)
  comment   String
  createdAt DateTime @default(now())
}
```

-  [`NextAuth.js`](https://next-auth.js.org/) - Easy authentication for Next.js

```tsx title="NextAuth.js provider"
export const authOptions: NextAuthOptions = {
   providers: [
      GithubProvider({
         clientId: process.env.GITHUB_ID,
         clientSecret: process.env.GITHUB_SECRET,
      }),
      // ...and more providers, etc.
   ],
};
```

...and from experimenting with it on my own on smaller projects, I decided to rewrite my website using this Tech Stack.

From what I've also seen, the website has proved to be much faster and much more responsive compared to my previous approach and this is what I've wanted. The purpose of my website is to show how my best work would look like, and I've never been more happy regarding the quality of my website.
